
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Concurrent, cache-efficient, and Dockerfile-agnostic builder toolkit">
      
      
        <meta name="author" content="Moby">
      
      
        <link rel="canonical" href="https://crazymax.dev/buildkit/user-guides/lazy-pulling/">
      
      <link rel="icon" href="../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.11">
    
    
      
        <title>Lazy pulling - BuildKit</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.50e68009.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  



    
    
<meta name="application-name" content="BuildKit">
<meta name="msapplication-TileColor" content="#FFFFFF">
<meta name="msapplication-TileImage" content="https://crazymax.dev/buildkit/assets/meta/mstile-144x144.png">
<meta name="msapplication-square70x70logo" content="https://crazymax.dev/buildkit/assets/meta/mstile-70x70.png">
<meta name="msapplication-square150x150logo" content="https://crazymax.dev/buildkit/assets/meta/mstile-150x150.png">
<meta name="msapplication-wide310x150logo" content="https://crazymax.dev/buildkit/assets/meta/mstile-310x150.png">
<meta name="msapplication-square310x310logo" content="https://crazymax.dev/buildkit/assets/meta/mstile-310x310.png">
<meta property="og:type" content="website">
<meta property="og:title" content="BuildKit - Lazy pulling">
<meta property="og:description" content="Concurrent, cache-efficient, and Dockerfile-agnostic builder toolkit">
<meta property="og:url" content="https://crazymax.dev/buildkit/user-guides/lazy-pulling/">
<meta property="og:image" content="https://crazymax.dev/buildkit/assets/logo.png">
<meta property="og:image:alt" content="BuildKit">
<meta property="og:image:type" content="image/png">
<meta property="og:image:width" content="1280">
<meta property="og:image:height" content="640">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@crazyws">
<meta name="twitter:creator" content="@crazyws">
<meta name="twitter:title" content="BuildKit - Lazy pulling">
<meta name="twitter:description" content="Concurrent, cache-efficient, and Dockerfile-agnostic builder toolkit">
<meta name="twitter:image" content="https://crazymax.dev/buildkit/assets/logo.png">
<meta name="google-site-verification" content="None">
<meta name="msvalidate.01" content="None">

<link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://crazymax.dev/buildkit/assets/meta/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://crazymax.dev/buildkit/assets/meta/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://crazymax.dev/buildkit/assets/meta/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://crazymax.dev/buildkit/assets/meta/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://crazymax.dev/buildkit/assets/meta/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://crazymax.dev/buildkit/assets/meta/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://crazymax.dev/buildkit/assets/meta/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://crazymax.dev/buildkit/assets/meta/apple-touch-icon-152x152.png">
<link rel="icon" type="image/png" href="https://crazymax.dev/buildkit/assets/meta/favicon-196x196.png" sizes="196x196">
<link rel="icon" type="image/png" href="https://crazymax.dev/buildkit/assets/meta/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="https://crazymax.dev/buildkit/assets/meta/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="https://crazymax.dev/buildkit/assets/meta/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="https://crazymax.dev/buildkit/assets/meta/favicon-128.png" sizes="128x128">

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="blue">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lazy-pulling-stargzestargz-base-images" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="BuildKit" class="md-header__button md-logo" aria-label="BuildKit" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            BuildKit
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Lazy pulling
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/moby/buildkit/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    moby/buildkit
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="BuildKit" class="md-nav__button md-logo" aria-label="BuildKit" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    BuildKit
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/moby/buildkit/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    moby/buildkit
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../quick-start/" class="md-nav__link">
        Quick start
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4">
          Usage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Usage" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Usage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/output/" class="md-nav__link">
        Output
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/cache/" class="md-nav__link">
        Cache
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/metadata/" class="md-nav__link">
        Metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/daemon-configuration/" class="md-nav__link">
        Daemon configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/opentelemetry/" class="md-nav__link">
        OpenTelemetry support
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Examples" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/kubernetes/" class="md-nav__link">
        Kubernetes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/buildctl-daemonless/" class="md-nav__link">
        buildctl daemonless
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/build-using-dockerfile/" class="md-nav__link">
        Build using a Dockerfile
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/consistent-hashing/" class="md-nav__link">
        Consistent hashing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6">
          Frontend
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Frontend" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Frontend
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/dockerfile/" class="md-nav__link">
        Dockerfile
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7">
          User guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="User guides" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          User guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../containerizing-buildkit/" class="md-nav__link">
        Containerizing BuildKit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rootless-mode/" class="md-nav__link">
        Rootless mode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../building-multi-platform-images/" class="md-nav__link">
        Building multi-platform images
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Lazy pulling
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Lazy pulling
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#known-limitations" class="md-nav__link">
    Known limitations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enabling-lazy-pulling-of-stargzestargz-images" class="md-nav__link">
    Enabling lazy pulling of stargz/eStargz images
  </a>
  
    <nav class="md-nav" aria-label="Enabling lazy pulling of stargz/eStargz images">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-builtin-support-recommended" class="md-nav__link">
    Using builtin support (recommended)
  </a>
  
    <nav class="md-nav" aria-label="Using builtin support (recommended)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-of-building-an-image-with-lazy-pull" class="md-nav__link">
    Example of building an image with lazy pull
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-proxy-standalone-snapshotter" class="md-nav__link">
    Using proxy (standalone) snapshotter
  </a>
  
    <nav class="md-nav" aria-label="Using proxy (standalone) snapshotter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#with-oci-worker" class="md-nav__link">
    With OCI worker
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#with-containerd-worker" class="md-nav__link">
    With containerd worker
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registry-related-configurations-for-standalone-stargz-snapshotter" class="md-nav__link">
    Registry-related configurations for standalone stargz snapshotter
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stargz-and-estargz-image-formats" class="md-nav__link">
    Stargz and eStargz image formats
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-stargzestargz-images" class="md-nav__link">
    Creating stargz/eStargz images
  </a>
  
    <nav class="md-nav" aria-label="Creating stargz/eStargz images">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#building-estargz-image-with-buildkit" class="md-nav__link">
    Building eStargz image with BuildKit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-methods-to-obtain-stargzestargz-images" class="md-nav__link">
    Other methods to obtain stargz/eStargz images
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../build-reproducibility/" class="md-nav__link">
        Build reproducibility
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../blog-posts/" class="md-nav__link">
        Blog posts
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8">
          Design
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Design" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Design
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../design/solver/" class="md-nav__link">
        Solver design
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_9">
          Community
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Community" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Community
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../community/contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../community/code-of-conduct/" class="md-nav__link">
        Code of conduct
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../community/users/" class="md-nav__link">
        Users
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../links/" class="md-nav__link">
        Links
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#known-limitations" class="md-nav__link">
    Known limitations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enabling-lazy-pulling-of-stargzestargz-images" class="md-nav__link">
    Enabling lazy pulling of stargz/eStargz images
  </a>
  
    <nav class="md-nav" aria-label="Enabling lazy pulling of stargz/eStargz images">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-builtin-support-recommended" class="md-nav__link">
    Using builtin support (recommended)
  </a>
  
    <nav class="md-nav" aria-label="Using builtin support (recommended)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-of-building-an-image-with-lazy-pull" class="md-nav__link">
    Example of building an image with lazy pull
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-proxy-standalone-snapshotter" class="md-nav__link">
    Using proxy (standalone) snapshotter
  </a>
  
    <nav class="md-nav" aria-label="Using proxy (standalone) snapshotter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#with-oci-worker" class="md-nav__link">
    With OCI worker
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#with-containerd-worker" class="md-nav__link">
    With containerd worker
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registry-related-configurations-for-standalone-stargz-snapshotter" class="md-nav__link">
    Registry-related configurations for standalone stargz snapshotter
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stargz-and-estargz-image-formats" class="md-nav__link">
    Stargz and eStargz image formats
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-stargzestargz-images" class="md-nav__link">
    Creating stargz/eStargz images
  </a>
  
    <nav class="md-nav" aria-label="Creating stargz/eStargz images">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#building-estargz-image-with-buildkit" class="md-nav__link">
    Building eStargz image with BuildKit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-methods-to-obtain-stargzestargz-images" class="md-nav__link">
    Other methods to obtain stargz/eStargz images
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/moby/buildkit/edit/master/website/user-guides/lazy-pulling.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>


<!-- DO NOT EDIT THIS PAGE but ./docs/stargz-estargz.md and changes will be propagated here -->
<h1 id="lazy-pulling-stargzestargz-base-images">Lazy pulling stargz/eStargz base images<a class="headerlink" href="#lazy-pulling-stargzestargz-base-images" title="Permanent link">&para;</a></h1>
<div class="admonition experimental">
<p class="admonition-title">Experimental</p>
<p>This feature is considered <strong>EXPERIMENTAL</strong> and under active development until further notice.</p>
</div>
<p>This document describes the configuration that allows buildkit to lazily pull <a href="https://github.com/google/crfs/blob/master/README.md#introducing-stargz">stargz</a>/<a href="https://github.com/containerd/stargz-snapshotter/blob/master/docs/stargz-estargz.md">eStargz</a>-formatted images from registries and how to obtain stargz/eStargz images.</p>
<p>By default, buildkit doesn't pull images until they are strictly needed.
For example, during a build, buildkit doesn't pull the base image until it runs commands on it (e.g. <code>RUN</code> Dockerfile instruction) or until it exports stages as tarballs, etc.</p>
<p>Additionally, if the image is formatted as stargz/eStargz, buildkit with the configuration described here can skip pull of that image even when it's needed (e.g. on <code>RUN</code> and <code>COPY</code> instructions).
Instead, it <em>mounts</em> that image from the registry to the node and <em>lazily</em> fetches necessary files (or chunks for big files) contained in that image on demand.
This can hopefully reduce the time to take for the build.
This document describes the configuration and usage of this feature.</p>
<p>For more details about stargz/eStargz image format, please see also <a href="#stargz-and-estargz-image-formats">Stargz and eStargz image formats</a> section.</p>
<h2 id="known-limitations">Known limitations<a class="headerlink" href="#known-limitations" title="Permanent link">&para;</a></h2>
<ul>
<li>If you are using containerd worker, stargz snapshotter (<code>containerd-stargz-grpc</code>) needs to be run and configured separately.</li>
<li>Rootless execution is currently unsupported.</li>
</ul>
<h2 id="enabling-lazy-pulling-of-stargzestargz-images">Enabling lazy pulling of stargz/eStargz images<a class="headerlink" href="#enabling-lazy-pulling-of-stargzestargz-images" title="Permanent link">&para;</a></h2>
<p>Buildkit supports two ways to enable lazy pulling of stargz/eStargz images.</p>
<h3 id="using-builtin-support-recommended">Using builtin support (recommended)<a class="headerlink" href="#using-builtin-support-recommended" title="Permanent link">&para;</a></h3>
<p>OCI worker has builtin support for stargz/eStargz.
You can enable this feature by running <code>buildkitd</code> with an option <code>--oci-worker-snapshotter=stargz</code>.</p>
<div class="highlight"><pre><span></span><code>buildkitd --oci-worker-snapshotter<span class="o">=</span>stargz
</code></pre></div>
<p>This is the easiest way to use this lazy pull feature on buildkit.
Currently, this configuration is unsupported for containerd worker.</p>
<h4 id="example-of-building-an-image-with-lazy-pull">Example of building an image with lazy pull<a class="headerlink" href="#example-of-building-an-image-with-lazy-pull" title="Permanent link">&para;</a></h4>
<p>Once <code>buildkitd</code> starts with the above configuration, stargz/eStargz images can be lazily pulled.
For example, we build the following golang binary with buildkit.</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span><span class="w"></span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;Hello, world!&quot;</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>The example Dockerfile which leverages eStargz-formatted base image will be the following.</p>
<div class="highlight"><pre><span></span><code><span class="c"># Uses eStargz-formatted golang image as the base image. This isn&#39;t pulled here.</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">ghcr.io/stargz-containers/golang:1.15.3-buster-esgz</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="s">dev</span>

<span class="c"># Copies the source code from the context. The base image is mounted and lazily pulled.</span>
<span class="k">COPY</span><span class="w"> </span>./hello.go /hello.go

<span class="c"># Runs go compiler on that base image. The base image is mounted and lazily pulled.</span>
<span class="k">RUN</span><span class="w"> </span>go build -o /hello /hello.go

<span class="k">FROM</span><span class="w"> </span><span class="s">scratch</span>

<span class="c"># Harvesting the result binary.</span>
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>dev /hello /
</code></pre></div>
<p>Then this can be built with skipping pull of <code>ghcr.io/stargz-containers/golang:1.15.3-buster-esgz</code>.
Instead, this image will be mounted from the registry to the node and necessary chunks of contents (e.g. <code>go</code> command binary, library, etc.) are partially fetched from that registry on demand.</p>
<div class="highlight"><pre><span></span><code>$ buildctl build --frontend dockerfile.v0 \
                 --local context=/tmp/hello \
                 --local dockerfile=/tmp/hello \
                 --output type=local,dest=./
$ ./hello
Hello, world!
</code></pre></div>
<p>Note that when a stage is exported (e.g. to the registry), the base image (even stargz/eStargz) of that stage needs to be pulled to copy it to the destination.
However if the destination is a registry and the target repository already contains some blobs of that image or <a href="https://docs.docker.com/registry/spec/api/#cross-repository-blob-mount">cross repository blob mount</a> can be used, buildkit keeps these blobs lazy.</p>
<h3 id="using-proxy-standalone-snapshotter">Using proxy (standalone) snapshotter<a class="headerlink" href="#using-proxy-standalone-snapshotter" title="Permanent link">&para;</a></h3>
<p>This is another way to enable stargz-based lazy pull.
<a href="https://github.com/containerd/stargz-snapshotter">Stargz Snapshotter (<code>containerd-stargz-grpc</code>)</a> needs to be installed.
Note that buildkit's registry configuration doesn't propagate to stargz snapshotter so it needs to be configured separately when you use private/mirror repositories.</p>
<p>This configuration is for users of containerd worker and ones trying other versions of stargz snapshotter than built into OCI worker.</p>
<h4 id="with-oci-worker">With OCI worker<a class="headerlink" href="#with-oci-worker" title="Permanent link">&para;</a></h4>
<p>Spawn <code>containerd-stargz-grpc</code> as a separated process.
Then run <code>buildkitd</code> with an option <code>--oci-worker-proxy-snapshotter-path=/run/containerd-stargz-grpc/containerd-stargz-grpc.sock</code> which makes it recognize this snapshotter via the socket.</p>
<div class="highlight"><pre><span></span><code>containerd-stargz-grpc
buildkitd --oci-worker-snapshotter<span class="o">=</span>stargz <span class="se">\</span>
          --oci-worker-proxy-snapshotter-path<span class="o">=</span>/run/containerd-stargz-grpc/containerd-stargz-grpc.sock
</code></pre></div>
<h4 id="with-containerd-worker">With containerd worker<a class="headerlink" href="#with-containerd-worker" title="Permanent link">&para;</a></h4>
<p>Configure containerd's config.toml (default = <code>/etc/containerd/config.toml</code>) to make it recognize stargz snapshotter as a <a href="https://github.com/containerd/containerd/blob/master/PLUGINS.md#proxy-plugins">proxy snapshotter</a>.</p>
<div class="highlight"><pre><span></span><code><span class="k">[proxy_plugins]</span><span class="w"></span>
<span class="w">  </span><span class="k">[proxy_plugins.stargz]</span><span class="w"></span>
<span class="w">    </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;snapshot&quot;</span><span class="w"></span>
<span class="w">    </span><span class="n">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;/run/containerd-stargz-grpc/containerd-stargz-grpc.sock&quot;</span><span class="w"></span>
</code></pre></div>
<p>Then spawn <code>containerd-stargz-grpc</code> and <code>containerd</code>, and run <code>buildkitd</code> with an option <code>--containerd-worker-snapshotter=stargz</code> which tells <code>containerd</code> to use stargz snapshotter.</p>
<div class="highlight"><pre><span></span><code>containerd-stargz-grpc
containerd
buildkitd --containerd-worker-snapshotter<span class="o">=</span>stargz --oci-worker<span class="o">=</span><span class="nb">false</span> --containerd-worker<span class="o">=</span><span class="nb">true</span>
</code></pre></div>
<h4 id="registry-related-configurations-for-standalone-stargz-snapshotter">Registry-related configurations for standalone stargz snapshotter<a class="headerlink" href="#registry-related-configurations-for-standalone-stargz-snapshotter" title="Permanent link">&para;</a></h4>
<p>When you use standalone stargz snapshotter, registry configuration needs to be done for the stargz snapshotter process, separately.
Create a configuration toml file which contains the registry configuration for stargz snapshotter (e.g. <code>/etc/containerd-stargz-grpc/config.toml</code>).
The configuration format <a href="https://github.com/containerd/stargz-snapshotter/blob/master/cmd/containerd-stargz-grpc/config.go"><strong>differs</strong> from buildkit</a>.
For more information about this format, please see also <a href="https://github.com/containerd/stargz-snapshotter/blob/master/docs/overview.md#registry-related-configuration">docs in the repository</a>.</p>
<div class="highlight"><pre><span></span><code><span class="k">[[resolver.host.&quot;exampleregistry.io&quot;.mirrors]]</span><span class="w"></span>
<span class="n">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;examplemirror.io&quot;</span><span class="w"></span>
</code></pre></div>
<p>Then pass this file to stargz snapshotter through <code>--config</code> option.</p>
<div class="highlight"><pre><span></span><code>containerd-stargz-grpc --config<span class="o">=</span>/etc/containerd-stargz-grpc/config.toml
</code></pre></div>
<h2 id="stargz-and-estargz-image-formats">Stargz and eStargz image formats<a class="headerlink" href="#stargz-and-estargz-image-formats" title="Permanent link">&para;</a></h2>
<p><a href="https://github.com/google/crfs/blob/master/README.md#introducing-stargz">Stargz</a> and <a href="https://github.com/containerd/stargz-snapshotter/blob/master/docs/stargz-estargz.md">eStargz</a> are OCI/Docker-compatible image formats that can be lazily pulled from standard registries (e.g. Docker Hub, GitHub Container Registry, etc).
Because they are backwards-compatible to OCI/Docker images, they can run on standard runtimes (e.g. Docker, containerd, etc.).
Stargz is proposed by <a href="https://github.com/google/crfs">Google CRFS project</a>.
eStargz is an extended format of stargz by <a href="https://github.com/containerd/stargz-snapshotter">Stargz Snapshotter</a>.
It comes with <a href="https://github.com/containerd/stargz-snapshotter/blob/master/docs/stargz-estargz.md#estargz-archive-format">additional features</a> including chunk verification and prefetch for avoiding the overhead of on-demand fetching.
For more details about lazy pull with stargz/eStargz images, please refer to the docs on these repositories.</p>
<h2 id="creating-stargzestargz-images">Creating stargz/eStargz images<a class="headerlink" href="#creating-stargzestargz-images" title="Permanent link">&para;</a></h2>
<h3 id="building-estargz-image-with-buildkit">Building eStargz image with BuildKit<a class="headerlink" href="#building-estargz-image-with-buildkit" title="Permanent link">&para;</a></h3>
<p>BuildKit supports creating eStargz as one of the compression types.
As shown in the following, <code>compression=estargz</code> creates an eStargz-formatted image.
Specifying <code>oci-mediatypes=true</code> option is highly recommended for enabling <a href="https://github.com/containerd/stargz-snapshotter/blob/v0.6.4/docs/verification.md">layer verification</a> of eStargz.</p>
<div class="highlight"><pre><span></span><code>buildctl build ... <span class="se">\</span>
  --output <span class="nv">type</span><span class="o">=</span>image,name<span class="o">=</span>docker.io/username/image,push<span class="o">=</span>true,compression<span class="o">=</span>estargz,oci-mediatypes<span class="o">=</span><span class="nb">true</span>
</code></pre></div>
<p><img alt="ℹ" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/2139.svg" title=":information_source:" /> Building eStargz is only supported by OCI worker.</p>
<p><img alt="ℹ" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/2139.svg" title=":information_source:" /> <code>compression</code> option isn't applied to layers that already exist in the cache (including the base images). Thus if you create eStargz image using non-eStargz base images, you need to specify <code>force-compression=true</code> option as well for applying the <code>compression</code> config to all existing layers.</p>
<p><img alt="ℹ" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/2139.svg" title=":information_source:" /> BuildKit doesn't support <a href="https://github.com/containerd/stargz-snapshotter/blob/v0.6.4/docs/stargz-estargz.md#example-use-case-of-prioritized-files-workload-based-image-optimization-in-stargz-snapshotter">prefetch-based optimization of eStargz</a>. To enable full feature of eStargz, you can also use other tools as described in the next section.</p>
<h3 id="other-methods-to-obtain-stargzestargz-images">Other methods to obtain stargz/eStargz images<a class="headerlink" href="#other-methods-to-obtain-stargzestargz-images" title="Permanent link">&para;</a></h3>
<p>Pre-converted stargz/eStargz images are available at <a href="https://github.com/containerd/stargz-snapshotter/blob/master/docs/pre-converted-images.md"><code>ghcr.io/stargz-containers</code> repository</a> (mainly for testing purpose).</p>
<p>You can also create any stargz/eStargz image using the variety of tools including the following.</p>
<ul>
<li><a href="https://github.com/containerd/nerdctl/blob/v0.10.0/docs/stargz.md#building-stargz-images-using-nerdctl-build"><code>nerdctl</code></a>: Docker-compatible CLI for containerd and BuildKit. This supports <code>convert</code> subcommand to convert an OCI/Docker image into eStargz.</li>
<li><a href="https://github.com/containerd/stargz-snapshotter/blob/v0.6.4/docs/ctr-remote.md"><code>ctr-remote</code></a>: containerd CLI developed in stargz snapshotter project. This supports converting an OCI/Docker image into eStargz and <a href="https://github.com/containerd/stargz-snapshotter/blob/v0.6.4/docs/stargz-estargz.md#example-use-case-of-prioritized-files-workload-based-image-optimization-in-stargz-snapshotter">optimizing</a> it.</li>
<li><a href="https://github.com/google/crfs/tree/master/stargz/stargzify"><code>stargzify</code></a>: CLI tool to convert an OCI/Docker image to stargz. This is developed in CRFS project. Creating eStargz is unsupported.</li>
</ul>
<p>There also other tools including Kaniko, ko, builpacks.io that support eStargz creation.
For more details, please refer to <a href="https://medium.com/nttlabs/lazy-pulling-estargz-ef35812d73de"><code>Creating eStargz images with tools in the community</code> section in the introductory post</a>.</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../building-multi-platform-images/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Building multi-platform images" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Building multi-platform images
            </div>
          </div>
        </a>
      
      
        
        <a href="../build-reproducibility/" class="md-footer__link md-footer__link--next" aria-label="Next: Build reproducibility" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Build reproducibility
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://mobyproject.org" target="_blank" rel="noopener" title="mobyproject.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.1c0 2.8-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40h-16c-1.1 0-2.2-.9-3.3-.1-1.4-.8-2.8.1-4.2.1H392c-22.1 0-40-17.9-40-40v-88c0-17.7-14.3-32-32-32h-64c-17.7 0-32 14.3-32 32v88c0 22.1-17.9 40-40 40h-55.9c-1.5 0-3-.1-4.5-.2-1.2.1-2.4.2-3.6.2h-16c-22.09 0-40-17.9-40-40V360c0-.9.03-1.9.09-2.8v-69.6H32.05C14.02 287.6 0 273.5 0 255.5c0-9 3.004-17 10.01-24L266.4 8.016c7-7.014 15-8.016 22-8.016s15 2.004 21.1 7.014L564.8 231.5c8 7 12.1 15 11 24z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://github.com/moby" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate", "navigation.indexes", "search.highlight", "search.share", "search.suggest"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.092fa1f6.min.js"}</script>
    
    
      <script src="../../assets/javascripts/bundle.5a9542cf.min.js"></script>
      
    
  </body>
</html>